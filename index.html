<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KM & JW Universe</title>
    <link rel="stylesheet" href="style.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&family=Noto+Sans+KR:wght@300;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>
    <div class="app-container">
        <!-- Snow & Lights Effects -->
        <div class="snow-container">
            <div class="snowflake" style="left: 10%; animation-delay: 0s;">❄</div>
            <div class="snowflake" style="left: 20%; animation-delay: 2s;">❅</div>
            <div class="snowflake" style="left: 30%; animation-delay: 4s;">❆</div>
            <div class="snowflake" style="left: 40%; animation-delay: 1s;">❄</div>
            <div class="snowflake" style="left: 50%; animation-delay: 3s;">❅</div>
            <div class="snowflake" style="left: 60%; animation-delay: 5s;">❆</div>
            <div class="snowflake" style="left: 70%; animation-delay: 2.5s;">❄</div>
            <div class="snowflake" style="left: 80%; animation-delay: 1.5s;">❅</div>
            <div class="snowflake" style="left: 90%; animation-delay: 3.5s;">❆</div>
        </div>
        <div class="lights-string">
            <div class="light-bulb"></div>
            <div class="light-bulb"></div>
            <div class="light-bulb"></div>
            <div class="light-bulb"></div>
            <div class="light-bulb"></div>
            <div class="light-bulb"></div>
            <div class="light-bulb"></div>
            <div class="light-bulb"></div>
            <div class="light-bulb"></div>
            <div class="light-bulb"></div>
            <div class="light-bulb"></div>
            <div class="light-bulb"></div>
        </div>

        <!-- Landing Section (Invitation Style) -->
        <section id="landing" class="page active">
            <div class="invitation-card">
                <div class="wax-seal">🎄</div>
                <div class="tree-container-mini">
                    <div class="tree-layer"></div>
                    <div class="tree-layer"></div>
                    <div class="star-topper">★</div>
                </div>
                <div class="invitation-content">
                    <div class="subtitle">You are invited to</div>
                    <h1 class="title">KM & JW<br><span class="highlight">Universe</span></h1>
                    <p class="message">크리스마스의 마법이 가득한<br>우리만의 공간으로 초대합니다.</p>

                    <div class="login-buttons">
                        <button class="btn-primary full-width" onclick="login('kyungmin')">For Kyung-min (Fairy)
                            🧚‍♀️</button>
                        <button class="btn-secondary full-width" onclick="login('jungwoo')">For Jung-woo (Butler)
                            🤵‍♂️</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Dashboard Section -->
        <section id="dashboard" class="page hidden">
            <header class="header centered-header">
                <button class="btn-icon settings-btn" onclick="navigateTo('settings')"><i
                        class="fas fa-cog"></i></button>
                <h2 class="header-title"><span id="user-name-title">기여미</span>의 주기</h2>
                <div class="spacer"></div>
            </header>

            <div class="content dashboard-content">
                <!-- D-Day Badge -->
                <div class="d-day-badge" id="d-day-display">♥ +100일</div>

                <!-- Cycle Phase Card -->
                <div class="card phase-card">
                    <h3 class="card-title">주기 단계</h3>
                    <p class="phase-desc" id="phase-desc">기여미가 배란기에 있습니다. 가까이 머물고, 소통하고, 정서적으로 함께 있어 주세요!</p>

                    <div class="cycle-slider-container">
                        <div class="cycle-track">
                            <div class="track-segment period" style="width: 20%; left: 0;"></div>
                            <div class="track-segment fertile" style="width: 25%; left: 35%;"></div>
                        </div>
                        <div class="cycle-thumb" id="cycle-thumb" style="left: 50%;"></div>
                    </div>
                    <div class="cycle-day-label" id="cycle-day-label">14일차</div>
                </div>

                <!-- Pregnancy Chance Card (Fixed Graph) -->
                <div class="card pregnancy-card">
                    <h3 class="card-title">임신 가능성</h3>
                    <div class="pregnancy-value" id="pregnancy-value">보통</div>
                    <div class="wave-graph-container">
                        <svg viewBox="0 0 100 50" class="wave-svg" preserveAspectRatio="none" id="pregnancy-graph-svg">
                            <defs>
                                <linearGradient id="grad1" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#f8b229;stop-opacity:0.8" />
                                    <stop offset="100%" style="stop-color:#f8b229;stop-opacity:0" />
                                </linearGradient>
                            </defs>
                            <path id="graph-path-fill" d="" fill="url(#grad1)" />
                            <path id="graph-path-line" d="" fill="none" stroke="#f8b229" stroke-width="2" />
                        </svg>
                        <div class="wave-indicator" id="wave-indicator" style="left: 50%;"></div>
                    </div>
                </div>

                <!-- Stats Grid (Partner View) -->
                <div class="stats-grid">
                    <div class="card stat-card" onclick="openDailyLog(new Date())">
                        <h3 class="card-title" id="partner-stat-title-1">상대방 성욕</h3>
                        <div class="stat-content">
                            <div class="stat-icon-circle pink"><i class="fas fa-heart"></i></div>
                            <div class="stat-value" id="partner-libido">기록 없음</div>
                        </div>
                    </div>
                    <div class="card stat-card" onclick="openDailyLog(new Date())">
                        <h3 class="card-title" id="partner-stat-title-2">상대방 기분</h3>
                        <div class="stat-content">
                            <div class="stat-icon-circle yellow"><i class="fas fa-smile"></i></div>
                            <div class="stat-value" id="partner-mood">기록 없음</div>
                        </div>
                    </div>
                </div>

                <!-- Quick Menu Grid -->
                <div class="grid-menu small-grid">
                    <div class="card menu-item small" onclick="navigateTo('sommelier')">
                        <i class="fas fa-wine-glass-alt"></i>
                        <span>Sommelier</span>
                    </div>
                    <div class="card menu-item small" onclick="navigateTo('stylist')">
                        <i class="fas fa-tshirt"></i>
                        <span>Stylist</span>
                    </div>
                </div>
            </div>

            <nav class="bottom-nav">
                <button class="nav-item active" onclick="navigateTo('dashboard')"><i
                        class="fas fa-tree"></i><span>오늘</span></button>
                <button class="nav-item" onclick="navigateTo('calendar')"><i
                        class="fas fa-calendar-alt"></i><span>달력</span></button>
                <button class="nav-item" onclick="navigateTo('memory')"><i
                        class="fas fa-camera"></i><span>추억</span></button>
                <button class="nav-item" onclick="navigateTo('stylist')"><i
                        class="fas fa-tshirt"></i><span>코디</span></button>
            </nav>
        </section>

        <!-- Memory Feed Section (New) -->
        <section id="memory" class="page hidden">
            <header class="header">
                <button class="btn-icon" onclick="navigateTo('dashboard')"><i class="fas fa-arrow-left"></i></button>
                <h2>Our Memories</h2>
                <div class="spacer"></div>
            </header>
            <div class="content" id="memory-feed">
                <!-- Memory Cards injected here -->
            </div>
            <button class="fab-btn" onclick="openMemoryModal()"><i class="fas fa-plus"></i></button>

            <nav class="bottom-nav">
                <button class="nav-item" onclick="navigateTo('dashboard')"><i
                        class="fas fa-tree"></i><span>오늘</span></button>
                <button class="nav-item" onclick="navigateTo('calendar')"><i
                        class="fas fa-calendar-alt"></i><span>달력</span></button>
                <button class="nav-item active" onclick="navigateTo('memory')"><i
                        class="fas fa-camera"></i><span>추억</span></button>
                <button class="nav-item" onclick="navigateTo('stylist')"><i
                        class="fas fa-tshirt"></i><span>코디</span></button>
            </nav>
        </section>

        <!-- Calendar Section -->
        <section id="calendar" class="page hidden">
            <header class="header">
                <button class="btn-icon" onclick="navigateTo('dashboard')"><i class="fas fa-arrow-left"></i></button>
                <h2>Secret Calendar</h2>
                <div class="spacer"></div>
            </header>
            <div class="content">
                <div class="card">
                    <div class="calendar-header">
                        <button class="btn-mini" onclick="changeMonth(-1)"><i class="fas fa-chevron-left"></i></button>
                        <h3 id="current-month-display">December 2025</h3>
                        <button class="btn-mini" onclick="changeMonth(1)"><i class="fas fa-chevron-right"></i></button>
                    </div>
                    <div class="weekdays">
                        <div>Sun</div>
                        <div>Mon</div>
                        <div>Tue</div>
                        <div>Wed</div>
                        <div>Thu</div>
                        <div>Fri</div>
                        <div>Sat</div>
                    </div>
                    <div class="calendar-grid" id="calendar-grid"></div>
                    <div class="calendar-legend">
                        <span class="legend-item"><span class="dot period"></span>생리</span>
                        <span class="legend-item"><span class="dot fertile"></span>가임기</span>
                        <span class="legend-item"><span class="dot love"></span>Love</span>
                    </div>
                </div>
            </div>
            <nav class="bottom-nav">
                <button class="nav-item" onclick="navigateTo('dashboard')"><i
                        class="fas fa-tree"></i><span>오늘</span></button>
                <button class="nav-item active" onclick="navigateTo('calendar')"><i
                        class="fas fa-calendar-alt"></i><span>달력</span></button>
                <button class="nav-item" onclick="navigateTo('memory')"><i
                        class="fas fa-camera"></i><span>추억</span></button>
                <button class="nav-item" onclick="navigateTo('stylist')"><i
                        class="fas fa-tshirt"></i><span>코디</span></button>
            </nav>
        </section>

        <!-- Stylist Section -->
        <section id="stylist" class="page hidden">
            <header class="header">
                <button class="btn-icon" onclick="navigateTo('dashboard')"><i class="fas fa-arrow-left"></i></button>
                <h2>My Daily Stylist</h2>
                <div class="spacer"></div>
            </header>
            <div class="content">
                <!-- OOTD Generator -->
                <div class="card">
                    <h3 class="card-title">OOTD Generator</h3>
                    <div class="form-group">
                        <label>상황 (TPO)</label>
                        <div class="select-options" id="tpo-select">
                            <button class="option-btn active" data-value="work">출근</button>
                            <button class="option-btn" data-value="date">데이트</button>
                            <button class="option-btn" data-value="casual">일상</button>
                        </div>
                    </div>
                    <button class="btn-primary full-width" onclick="generateOOTD()">코디 추천받기</button>
                    <div id="ootd-result" class="ootd-result hidden">
                        <p id="ootd-text">따뜻하지만 슬림해 보이는 로로피아나 머플러와 지난번 산 코트 조합 어때요?</p>
                    </div>
                </div>

                <!-- Digital Closet -->
                <div class="card">
                    <div class="header-row" style="display:flex; justify-content:space-between;">
                        <h3 class="card-title">Digital Closet</h3>
                        <button class="btn-mini" onclick="document.getElementById('closet-upload').click()"><i
                                class="fas fa-plus"></i></button>
                        <input type="file" id="closet-upload" hidden accept="image/*" onchange="addToCloset(this)">
                    </div>
                    <div class="closet-grid" id="closet-grid">
                        <!-- Items injected here -->
                    </div>
                </div>

                <!-- Wishlist -->
                <div class="card">
                    <h3 class="card-title">Wishlist Approval</h3>
                    <div class="form-group">
                        <input type="text" id="wishlist-input" class="input-field" placeholder="사고 싶은 물건 이름...">
                        <button class="btn-primary full-width" style="margin-top:10px;"
                            onclick="addToWishlist()">올리기</button>
                    </div>
                    <div id="wishlist-container">
                        <!-- Items injected here -->
                    </div>
                </div>
            </div>
            <nav class="bottom-nav">
                <button class="nav-item" onclick="navigateTo('dashboard')"><i
                        class="fas fa-tree"></i><span>오늘</span></button>
                <button class="nav-item" onclick="navigateTo('calendar')"><i
                        class="fas fa-calendar-alt"></i><span>달력</span></button>
                <button class="nav-item" onclick="navigateTo('memory')"><i
                        class="fas fa-camera"></i><span>추억</span></button>
                <button class="nav-item active" onclick="navigateTo('stylist')"><i
                        class="fas fa-tshirt"></i><span>코디</span></button>
            </nav>
        </section>

        <!-- Date Sommelier Section -->
        <section id="sommelier" class="page hidden">
            <header class="header">
                <button class="btn-icon" onclick="navigateTo('dashboard')"><i class="fas fa-arrow-left"></i></button>
                <h2>Date Sommelier</h2>
                <div class="spacer"></div>
            </header>

            <div class="content">
                <div class="sommelier-form">
                    <div class="form-group">
                        <label>요일</label>
                        <div class="select-options" id="day-select">
                            <button class="option-btn active" data-value="weekend">주말</button>
                            <button class="option-btn" data-value="weekday">평일</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>오늘의 컨디션</label>
                        <div class="select-options" id="condition-select">
                            <button class="option-btn" data-value="bad">😢 피곤</button>
                            <button class="option-btn active" data-value="good">😊 좋음</button>
                            <button class="option-btn" data-value="best">😍 최고</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>날씨</label>
                        <div class="select-options" id="weather-select">
                            <button class="option-btn" data-value="rain">☔ 비/눈</button>
                            <button class="option-btn active" data-value="clear">☀️ 맑음</button>
                            <button class="option-btn" data-value="cloudy">☁️ 흐림</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>식사 옵션</label>
                        <div class="toggle-wrapper">
                            <span style="color:rgba(255,255,255,0.7)">No Carbs (저탄수)</span>
                            <label class="switch">
                                <input type="checkbox" id="no-carbs" checked>
                                <span class="slider round"></span>
                            </label>
                        </div>
                    </div>

                    <button class="btn-primary full-width" onclick="recommendDate()">AI 추천 받기</button>
                </div>

                <div id="recommendation-result" class="card result-card hidden">
                    <div class="result-header">
                        <i class="fas fa-sparkles"></i>
                        <span>AI's Pick</span>
                    </div>
                    <h3 id="result-title">추천 코스</h3>
                    <p id="result-desc">설명</p>
                </div>
            </div>
            <nav class="bottom-nav">
                <button class="nav-item" onclick="navigateTo('dashboard')"><i
                        class="fas fa-tree"></i><span>오늘</span></button>
                <button class="nav-item" onclick="navigateTo('calendar')"><i
                        class="fas fa-calendar-alt"></i><span>달력</span></button>
                <button class="nav-item" onclick="navigateTo('memory')"><i
                        class="fas fa-camera"></i><span>추억</span></button>
                <button class="nav-item" onclick="navigateTo('stylist')"><i
                        class="fas fa-tshirt"></i><span>코디</span></button>
            </nav>
        </section>

        <!-- Settings Section -->
        <section id="settings" class="page hidden">
            <header class="header">
                <button class="btn-icon" onclick="navigateTo('dashboard')"><i class="fas fa-arrow-left"></i></button>
                <h2>Settings</h2>
                <div class="spacer"></div>
            </header>
            <div class="content">
                <div class="card">
                    <h3>기본 정보</h3>
                    <div class="form-group">
                        <label>내 이름 (애칭)</label>
                        <input type="text" id="setting-name" class="input-field" value="경민요정">
                    </div>
                </div>
                <div class="card">
                    <h3>Cycle 정보</h3>
                    <div class="form-group">
                        <label>마지막 생리 시작일</label>
                        <input type="date" id="setting-last-period" class="input-field">
                    </div>
                    <div class="form-group">
                        <label>평균 주기 (일)</label>
                        <input type="number" id="setting-cycle-length" class="input-field" value="28">
                    </div>
                    <button class="btn-primary full-width" onclick="saveSettings()">저장하기</button>
                </div>
            </div>
        </section>

        <!-- Daily Log Modal -->
        <div id="log-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modal-date">2025.12.12</h3>
                    <button class="btn-close" onclick="closeModal()"><i class="fas fa-times"></i></button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>오늘의 기분 (나의 기록)</label>
                        <div class="emoji-selector" id="log-mood">
                            <span data-value="happy">🥰</span>
                            <span data-value="calm">🙂</span>
                            <span data-value="sad">😢</span>
                            <span data-value="angry">😡</span>
                            <span data-value="tired">🫠</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>성욕 (나의 기록)</label>
                        <input type="range" id="log-libido" min="1" max="5" value="3" class="slider-range">
                        <div class="range-labels">
                            <span style="color:rgba(255,255,255,0.5)">Low</span>
                            <span style="color:rgba(255,255,255,0.5)">High</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>메모</label>
                        <textarea id="log-note" class="input-area" placeholder="오늘의 특별한 일..."></textarea>
                    </div>
                    <button class="btn-primary full-width" onclick="saveDailyLog()">기록 저장</button>
                </div>
            </div>
        </div>

        <!-- Add Memory Modal -->
        <div id="memory-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Add Memory</h3>
                    <button class="btn-close" onclick="closeMemoryModal()"><i class="fas fa-times"></i></button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>사진</label>
                        <input type="file" id="memory-photo" accept="image/*" class="input-field">
                    </div>
                    <div class="form-group">
                        <label>날짜</label>
                        <input type="date" id="memory-date" class="input-field">
                    </div>
                    <div class="form-group">
                        <label>장소</label>
                        <input type="text" id="memory-location" class="input-field" placeholder="어디서 찍었나요?">
                    </div>
                    <div class="form-group">
                        <label>설명</label>
                        <textarea id="memory-desc" class="input-area" placeholder="어떤 순간이었나요?"></textarea>
                    </div>
                    <button class="btn-primary full-width" onclick="saveMemory()">추억 저장</button>
                </div>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
</body>

</html>